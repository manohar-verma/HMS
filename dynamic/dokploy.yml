http:
  routers:
    # HTTP router with redirect
    stayhub360-http:
      rule: Host(`stayhub360.com`)
      entryPoints:
        - web
      service: stayhub360-service
      middlewares:
        - redirect-to-https
      priority: 100

    # HTTPS router
    stayhub360-router:
      rule: Host(`stayhub360.com`)
      entryPoints:
        - websecure
      service: stayhub360-service
      tls:
        certResolver: letsencrypt
      priority: 200

  services:
    stayhub360-service:
      loadBalancer:
        servers:
          - url: http://laravel_nginx:80
        passHostHeader: true

  middlewares:
    redirect-to-https:
      redirectScheme:
        scheme: https
        permanent: true